{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8080/api';\nexport const api = axios.create({\n  baseURL: API_URL\n});\nconst getToken = () => {\n  return localStorage.getItem('token');\n};\nconst getUserIdFromToken = () => {\n  const token = getToken();\n  if (token) {\n    const decoded = jwtDecode(token); // Si usas jwt-decode para decodificar el JWT\n    return decoded.userId; // Asumimos que el JWT tiene un campo `userId`\n  }\n  return null;\n};\nexport const signup = data => api.post('/v1/auth/signup', data);\nexport const signin = data => api.post('/v1/auth/signin', data);\nexport const createPet = (petData, token) => {\n  return axios.post(`${API_URL}/pet/new`, petData, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const getUserPets = (userId, token) => {\n  return api.get(`/pet/getUserPets?userId=${userId}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const getAll = token => api.get('/pet/getAll', {\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\nexport const getPetDetails = petId => {\n  const token = getToken();\n  const userId = getUserIdFromToken(); // Obtener el userId del token\n  if (!token || !userId) {\n    console.error(\"User not authenticated or token missing.\");\n    return Promise.reject(\"Authentication required\");\n  }\n  return axios.get(`/api/pet/get?userId=${userId}&petId=${petId}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const updatePet = (petId, petInteraction) => {\n  const token = getToken();\n  const userId = getUserIdFromToken(); // Obtener el userId del token\n\n  if (!token || !userId) {\n    console.error(\"User not authenticated or token missing.\");\n    return Promise.reject(\"Authentication required\");\n  }\n  const data = {\n    petInteraction,\n    userId\n  }; // Incluir el userId en el body\n\n  return axios.put(`/api/pet/update/${petId}`, data, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","getToken","localStorage","getItem","getUserIdFromToken","token","decoded","jwtDecode","userId","signup","data","post","signin","createPet","petData","headers","Authorization","getUserPets","get","getAll","getPetDetails","petId","console","error","Promise","reject","updatePet","petInteraction","put"],"sources":["C:/Users/patri/Desktop/JAVA_ITACADEMY/SPRINT_5_VirtualPet/Front/src/services/api.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_URL = 'http://localhost:8080/api';\n\nexport const api = axios.create({\n  baseURL: API_URL,\n});\n\nconst getToken = () => {\n  return localStorage.getItem('token');\n};\n\nconst getUserIdFromToken = () => {\n  const token = getToken();\n  if (token) {\n      const decoded = jwtDecode(token); // Si usas jwt-decode para decodificar el JWT\n      return decoded.userId; // Asumimos que el JWT tiene un campo `userId`\n  }\n  return null;\n};\n\nexport const signup = (data) => api.post('/v1/auth/signup', data);\nexport const signin = (data) => api.post('/v1/auth/signin', data);\n\nexport const createPet = (petData, token) => {\n  return axios.post(`${API_URL}/pet/new`, petData, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n};\n\n  export const getUserPets = (userId, token) => {\n    return api.get(`/pet/getUserPets?userId=${userId}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n  };\n\n  export const getAll = (token) => \n    api.get('/pet/getAll', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    export const getPetDetails = (petId) => {\n      const token = getToken();\n      const userId = getUserIdFromToken(); // Obtener el userId del token\n      if (!token || !userId) {\n          console.error(\"User not authenticated or token missing.\");\n          return Promise.reject(\"Authentication required\");\n      }\n  \n      return axios.get(`/api/pet/get?userId=${userId}&petId=${petId}`, {\n          headers: { Authorization: `Bearer ${token}` },\n      });\n  };\n    \n  export const updatePet = (petId, petInteraction) => {\n    const token = getToken();\n    const userId = getUserIdFromToken(); // Obtener el userId del token\n    \n    if (!token || !userId) {\n        console.error(\"User not authenticated or token missing.\");\n        return Promise.reject(\"Authentication required\");\n    }\n\n    const data = { petInteraction, userId }; // Incluir el userId en el body\n\n    return axios.put(`/api/pet/update/${petId}`, data, {\n        headers: {\n            Authorization: `Bearer ${token}`,\n        },\n    });\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}