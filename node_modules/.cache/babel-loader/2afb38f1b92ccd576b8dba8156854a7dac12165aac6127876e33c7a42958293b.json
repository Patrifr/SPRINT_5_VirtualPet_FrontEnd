{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8080/api';\nexport const api = axios.create({\n  baseURL: API_URL\n});\nconst getToken = () => localStorage.getItem('token');\n\n// Función para obtener el userId desde el token\nconst getUserIdFromToken = () => {\n  const token = getToken();\n  if (!token) return null;\n  const decodedToken = JSON.parse(atob(token.split('.')[1])); // Decodificar JWT\n  return decodedToken.userId; // Devuelve el userId del token\n};\nexport const signup = data => api.post('/v1/auth/signup', data);\nexport const signin = data => api.post('/v1/auth/signin', data);\nexport const createPet = (petData, token) => {\n  return axios.post(`${API_URL}/pet/new`, petData, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const getUserPets = (userId, token) => {\n  return api.get(`/pet/getUserPets?userId=${userId}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const getAll = token => api.get('/pet/getAll', {\n  headers: {\n    Authorization: `Bearer ${token}`\n  }\n});\nexport const getPetDetails = petId => {\n  const token = getToken();\n  const userId = getUserIdFromToken(); // Obtener el userId del token\n  if (!token || !userId) {\n    console.error(\"User not authenticated or token missing.\");\n    return Promise.reject(\"Authentication required\");\n  }\n  return axios.get(`/api/pet/get?userId=${userId}&petId=${petId}`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};\nexport const updatePet = (petId, petInteraction) => {\n  const token = getToken();\n  const userId = getUserIdFromToken(); // Obtener el userId del token\n  if (!token || !userId) {\n    console.error(\"User not authenticated or token missing.\");\n    return Promise.reject(\"Authentication required\");\n  }\n  const data = {\n    id: petId,\n    petInteraction,\n    userId\n  }; // Incluir el userId en el body\n\n  return axios.put(`/api/pet/update/${petId}`, data, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n};","map":{"version":3,"names":["axios","API_URL","api","create","baseURL","getToken","localStorage","getItem","getUserIdFromToken","token","decodedToken","JSON","parse","atob","split","userId","signup","data","post","signin","createPet","petData","headers","Authorization","getUserPets","get","getAll","getPetDetails","petId","console","error","Promise","reject","updatePet","petInteraction","id","put"],"sources":["C:/Users/patri/Desktop/JAVA_ITACADEMY/SPRINT_5_VirtualPet/Front/src/services/api.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_URL = 'http://localhost:8080/api';\n\nexport const api = axios.create({\n  baseURL: API_URL,\n});\n\nconst getToken = () => localStorage.getItem('token');\n\n// Función para obtener el userId desde el token\nconst getUserIdFromToken = () => {\n    const token = getToken();\n    if (!token) return null;\n\n    const decodedToken = JSON.parse(atob(token.split('.')[1])); // Decodificar JWT\n    return decodedToken.userId; // Devuelve el userId del token\n};\n\nexport const signup = (data) => api.post('/v1/auth/signup', data);\nexport const signin = (data) => api.post('/v1/auth/signin', data);\n\nexport const createPet = (petData, token) => {\n  return axios.post(`${API_URL}/pet/new`, petData, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n};\n\n  export const getUserPets = (userId, token) => {\n    return api.get(`/pet/getUserPets?userId=${userId}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n  };\n\n  export const getAll = (token) => \n    api.get('/pet/getAll', {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    export const getPetDetails = (petId) => {\n      const token = getToken();\n      const userId = getUserIdFromToken(); // Obtener el userId del token\n      if (!token || !userId) {\n          console.error(\"User not authenticated or token missing.\");\n          return Promise.reject(\"Authentication required\");\n      }\n  \n      return axios.get(`/api/pet/get?userId=${userId}&petId=${petId}`, {\n          headers: { Authorization: `Bearer ${token}` },\n      });\n  };\n    \n  export const updatePet = (petId, petInteraction) => {\n    const token = getToken();\n    const userId = getUserIdFromToken(); // Obtener el userId del token\n    if (!token || !userId) {\n        console.error(\"User not authenticated or token missing.\");\n        return Promise.reject(\"Authentication required\");\n    }\n\n    const data = { id: petId, petInteraction, userId }; // Incluir el userId en el body\n\n    return axios.put(`/api/pet/update/${petId}`, data, {\n        headers: {\n            Authorization: `Bearer ${token}`,\n        },\n    });\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}